#!/bin/bash

# Cinit - A simple script to initialise a new C project with templates
# Usage: cinit [options]
# Stores templates in ~/.config/cinit/ and copies them to the current directory

# Config file location
CONFIG_FILE=~/.config/cinit/cinit.conf

# Default template directory (where files are copied from)
TEMPLATE_DIR=~/.config/cinit/default

# Load configuration
. "$CONFIG_FILE"

# Set DEFAULT_YEAR dynamically
DEFAULT_YEAR=$(date +%Y)

# Define default license file
LICENSE_FILE=~/.config/cinit/templates/licenses/LICENSE-$DEFAULT_LICENSE

# Copy files from default template directory
for file in $INCLUDE_FILES; do
    if [ "$file" = "LICENSE" ]; then
        # Copy license file and replace placeholders
        sed "s/{OWNER_NAME}/$OWNER_NAME/g; s/{DEFAULT_YEAR}/$DEFAULT_YEAR/g" "$LICENSE_FILE" > "./LICENSE"
    else
        cp "$TEMPLATE_DIR/$file" "./$file"
    fi
done

# Debug
echo "Loaded DEFAULT_LICENSE: $DEFAULT_LICENSE"
echo "Loaded OWNER_NAME: $OWNER_NAME"
echo "Loaded DEFAULT_YEAR: $DEFAULT_YEAR"
echo "Loaded INCLUDE_FILES: $INCLUDE_FILES"

